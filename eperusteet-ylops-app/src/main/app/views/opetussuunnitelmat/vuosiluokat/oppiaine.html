<div ng-if="isEditable() && (oppiaine.tyyppi !== 'yhteinen' || !oppiaine.oma)" class="action-buttons-inline">
  <span class="lukko-wrapper">
    <lukko ng-if="lukkotiedot.lukittu" tip="lukkotiedot.tip" size="small"></lukko>
  </span>
  <button ng-if="oppiaine.oma" class="btn btn-default" icon-role="edit" ng-disabled="lukkotiedot.lukittu" ng-click="editOppiaine()" kaanna="'muokkaa-oppiainetta'" oikeustarkastelu="{ target: 'opetussuunnitelma', permission: 'muokkaus' }"></button>
  <button ng-if="oppiaine.oma" class="btn btn-default" icon-role="remove" ng-disabled="lukkotiedot.lukittu" ng-click="removeOppiaine()" kaanna="'poista-oppiaine'" oikeustarkastelu="{ target: 'opetussuunnitelma', permission: 'muokkaus' }"></button>
  <button ng-if="!oppiaine.oma && !oppiaine.$parent" class="btn btn-default" ng-disabled="lukkotiedot.lukittu" kaanna="'kopioi-muokattavaksi'" icon-role="ep-text-clone" ng-click="kopioiMuokattavaksi()" oikeustarkastelu="{ target: 'opetussuunnitelma', permission: 'muokkaus' }"></button>
</div>
<div ng-if="isEditable() && oppiaine.oma" class="action-buttons-inline">
  <button ng-if="valitseOppimaara" class="btn btn-default" icon-role="plus" kaanna="oppiaine.koodiArvo == 'KT' ? 'lisaa-muu-uskonto' : 'lisaa-kielitarjonta'" ng-click="valitseOppimaara()"
          oikeustarkastelu="{ target: 'opetussuunnitelma', permission: 'muokkaus' }"></button>
  <button ng-if="$onKieliTaiUskonto" class="btn btn-default" icon-role="remove" kaanna="'poista'" ng-click="poistaOppimaara()"
          oikeustarkastelu="{ target: 'opetussuunnitelma', permission: 'muokkaus' }"></button>
</div>

<h2 ng-bind="oppiaine.nimi | kaanna"></h2>
<p ng-if="eiPerustetta" class="alert alert-error" kaanna="'ei-perustetta-info'"></p>

<div ng-show="$onKieliTaiUskonto" perusteen-tekstiosa="perusteOppiaine.tehtava" muokattava="oppiaine.tehtava" callbacks="callbacks" config="options"></div>
<div ng-hide="$onKieliTaiUskonto" perusteen-tekstiosa="perusteOppiaine.tehtava"></div>

<div class="tekstiosa-wrapper" ng-show="!oppiaine.koosteinen && oppiaineenVlk">
  <h3>
    <div class="action-buttons-inline" ng-if="isEditable() && isVuosiluokkaistettava">
      <button ng-if="oppiaine.tyyppi === 'yhteinen' && oppiaine.oma && !eiPerustetta" ng-disabled="lukkotiedot.lukittu" class="btn btn-default"
              icon-role="th-list" ng-click="startVuosiluokkaistaminen()" kaanna="'tavoitteiden-vuosiluokkaistaminen'"
              oikeustarkastelu="{ target: 'opetussuunnitelma', permission: 'muokkaus' }"></button>
    </div>
    <span kaanna="'tavoitteet-ja-sisallot-vuosiluokittain'"></span>
  </h3>

  <p class="empty-notice" ng-if="!vuosiluokat || vuosiluokat.length === 0 && isVuosiluokkaistettava">
    <span kaanna="'vuosiluokkaistamista-ei-viela-tehty'"></span>
    <span ng-if="oppiaine.oma" kaanna="'aloita-vuosiluokkaistaminen'" oikeustarkastelu="{ target: 'opetussuunnitelma', permission: 'muokkaus' }"></span>
  </p>
  <table ng-if="vuosiluokat.length > 0" class="table table-hover vuosiluokat-table">
    <tr>
      <th kaanna="'vuosiluokka'"></th>
    </tr>
    <tr class="vuosiluokka-row" ng-repeat="vuosiluokka in vuosiluokat | orderBy:'$numero'" ng-click="goToVuosiluokka(vuosiluokka)">
      <td>
        <a ui-sref="root.opetussuunnitelmat.yksi.oppiaine.vuosiluokka({vlId: vuosiluokka.id})">
          <span kaanna="'vuosiluokka'"></span> {{vuosiluokka.$numero}}
        </a>
      </td>
    </tr>
  </table>
</div>

<div ng-if="oppiaine.tyyppi === 'yhteinen'">
  <div perusteen-tekstiosa="perusteOpVlk.tehtava"></div>
</div>
<div ng-if="oppiaine.tyyppi !== 'yhteinen'">
  <div perusteen-tekstiosa="perusteOpVlk.tehtava" muokattava="oppiaineenVlk.tehtava" callbacks="callbacks" config="options"></div>
</div>
<div perusteen-tekstiosa="perusteOpVlk.tyotavat" muokattava="oppiaineenVlk.tyotavat" callbacks="callbacks" config="options"></div>
<div perusteen-tekstiosa="perusteOpVlk.ohjaus" muokattava="oppiaineenVlk.ohjaus" callbacks="callbacks" config="options"></div>
<div perusteen-tekstiosa="perusteOpVlk.arviointi" muokattava="oppiaineenVlk.arviointi" callbacks="callbacks" config="options"></div>

<kommentit></kommentit>
