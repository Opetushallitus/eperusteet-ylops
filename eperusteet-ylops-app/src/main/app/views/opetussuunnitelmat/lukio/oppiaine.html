<!--
  ~  Copyright (c) 2013 The Finnish Board of Education - Opetushallitus
  ~
  ~  This program is free software: Licensed under the EUPL, Version 1.1 or - as
  ~  soon as they will be approved by the European Commission - subsequent versions
  ~  of the EUPL (the "Licence");
  ~
  ~  You may not use this work except in compliance with the Licence.
  ~  You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl
  ~
  ~  This program is distributed in the hope that it will be useful,
  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~  European Union Public Licence for more details.
  -->


<div class="oppiaine-view" ng-show="!editMode">

    <div class="action-buttons-inline">
        <div ng-if="!oppiaine.isOma">
            <span kaanna="ei-yhdistetty-pohjaan"></span>
            <button class="btn btn-default" kaanna="'palauta-yhteys'"
                    ng-click="connectOppiaine()"></button>
        </div>
        <div ng-if="oppiaine.isOma">
            <span kaanna="yhdistetty-pohjaan"></span>
            <button class="btn btn-default" kaanna="'katkaise-yhteys'"
                    ng-click="disconnectOppiaine()"></button>
        </div>
    </div>
    <h3 ng-bind="oppiaine.nimi | kaanna"></h3>

    <hr class="mujuviiva"/>
    <!--<pre>{{oppiaine | json}}</pre>-->
    <!--<pre>{{oppiaine.kurssit | json}}</pre>-->

    <div class="action-buttons-inline">
        <button class="btn btn-default" kaanna="'tuo-perusteesta'"></button>
        <button class="btn btn-default" kaanna="'lisaa-kurssi'"></button>
    </div>
    <h4 kaanna="oppiaine-kurssit"></h4>
    <br/>

    <div ng-repeat="kurssi in oppiaine.kurssit">
        <div class="oppiaine-sisaltopuu lukio-oppiaineet-puu">
            <a ng-click="openKurssi(kurssi)" class="container-link tree-list-item ng-scope bubble-osa empty-item">
                <span class="span-container puu-node kurssi-node">
                    <span class="colorbox kurssi-tyyppi {{kurssi.perusteen.tyyppi | lowercase}}"></span>
                    <span class="aikaleima ng-binding">{{kurssi.muokattu | aikaleima: 'short' }}</span>
                    <span class="kurssikoodi">{{kurssi.koodiUri}} {{kurssi.nimi | kaanna}}</span>
                </span>
            </a>
        </div>
    </div>

    <!--<pre>{{oppiaine | json}}</pre>-->
    <!--<pre>{{oppiaine.perusteen.kurssiTyyppiKuvaukset | json}}</pre>-->

    <div class="lukio-oppiaineet-puu lukio-oppiaine-tab lukio-oppiaine-tyypit">
        <div class="main-column tree" style="margin-bottom: 20px;">
            <div class="tree-con">
                <div class="opetussisaltopuu tree">
                    <div class="legendContainer">
                        <div class="legends" style="width: 100%;">
                            <a ng-click="kurssiKuvauksetVisible=!kurssiKuvauksetVisible" class="left legend">
                                {{ 'nayta-kurssityyppi-kuvaukset' | kaanna}}
                                <span ng-class="{'glyphicon-chevron-right': !kurssiKuvauksetVisible, 'glyphicon-chevron-down': kurssiKuvauksetVisible}" class="glyphicon"></span></a>
                            <div class="left legend" style="float: right;">
                                <div class="left legend" ng-repeat="tyyppi in ['valtakunnallinen', 'paikallinen','pakollinen', 'syventava', 'soveltava']">
                                    <span class="colorbox kurssi-tyyppi {{tyyppi}}"></span>
                                    <span class="legend-name" ng-bind="'kurssi-tyyppi-selite-'+tyyppi | kaanna"></span>
                                </div>
                            </div>
                        </div>
                        <br/>

                        <div ng-if="kurssiKuvauksetVisible">
                            <br/>
                            <h2 kaanna="valtakunnalliset-kurssityypit"></h2>

                            <div ng-controller="LukioOppiaineSisaltoController" onload="perusteenTeksti = oppiaine.kurssiTyyppiKuvaukset.VALTAKUNNALLINEN_PAKOLLINEN; oppiaineenTeksti = oppiaine.kurssiTyyppiKuvaukset.PAIKALLINEN_PAKOLLINEN; title='pakollinen-kurssi';"
                                 ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineSisalto.html'"></div>

                            <div ng-controller="LukioOppiaineSisaltoController" onload="perusteenTeksti = oppiaine.kurssiTyyppiKuvaukset.VALTAKUNNALLINEN_SYVENTAVA; oppiaineenTeksti = oppiaine.kurssiTyyppiKuvaukset.PAIKALLINEN_SYVENTAVA; title='syventava-kurssi';"
                                 ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineSisalto.html'"></div>

                            <div ng-controller="LukioOppiaineSisaltoController" onload="perusteenTeksti = oppiaine.kurssiTyyppiKuvaukset.VALTAKUNNALLINEN_SOVELTAVA; oppiaineenTeksti = oppiaine.kurssiTyyppiKuvaukset.PAIKALLINEN_SOVELTAVA; title='soveltava-kurssi';"
                                 ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineSisalto.html'"></div>


                            <h2 kaanna="paikalliset-kurssityypit"></h2>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--ng-controller="LukioOppiaineSisaltoController"-->
    <!--<pre>{{ oppiaine | json}}</pre>-->
    <div ng-controller="LukioOppiaineSisaltoController" onload="perusteenTeksti = oppiaine.perusteen.tehtava.teksti; oppiaineenTeksti = oppiaine.tehtava.teksti; title='oppiaine-osa-tehtava';"
         ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineSisalto.html'"></div>

    <div ng-controller="LukioOppiaineSisaltoController" onload="perusteenTeksti = oppiaine.perusteen.tavoitteet.teksti; oppiaineenTeksti = oppiaine.tavoitteet.teksti; title='oppiaine-osa-tavoitteet';"
         ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineSisalto.html'"></div>

    <div ng-controller="LukioOppiaineSisaltoController" onload="perusteenTeksti = oppiaine.perusteen.arviointi.teksti; oppiaineenTeksti = oppiaine.arvioinnit.teksti; title='oppiaine-osa-arviointi';"
         ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineSisalto.html'"></div>

</div>

<div class="lisaa-oppiaine oppiaine-form" ng-show="editMode">
    <h2 kaanna="'lisaa-oppiaine-title'"></h2>

    <div class="non-collapsibles">
        <form name="oppiaineForm" role="form">
            <div class="action-buttons">
                <div class="floater" ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineOsavalitsin.html'">
                </div>
            </div>

            <div ng-include="'views/opetussuunnitelmat/lukio/include/oppiaineLomakeKentat.html'"></div>
        </form>
    </div>
</div>
