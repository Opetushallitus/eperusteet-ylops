<!--
  ~  Copyright (c) 2013 The Finnish Board of Education - Opetushallitus
  ~
  ~  This program is free software: Licensed under the EUPL, Version 1.1 or - as
  ~  soon as they will be approved by the European Commission - subsequent versions
  ~  of the EUPL (the "Licence");
  ~
  ~  You may not use this work except in compliance with the Licence.
  ~  You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl
  ~
  ~  This program is distributed in the hope that it will be useful,
  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~  European Union Public Licence for more details.
  -->

<div class="kurssi-view" ng-show="!editMode">
  <h3 ng-bind="oppiaine.nimi | kaanna"></h3>
  <hr class="mujuviiva"/>

  <a class="kurssi-return-btn" ng-click="goBack()">
    <span class="glyphicon glyphicon-chevron-left"></span>
    <strong kaanna="oppiaine.koosteinen?'takaisin-oppimaaraan':'takaisin-oppiaineeseen'"></strong>
  </a>

  <h3>
    {{ kurssi.nimi | kaanna}}
    <span style="padding-left: 20px; font-size: 12px;">
      <strong>{{ 'muokattu' | kaanna}}:</strong>
      {{kurssi.muokattu | aikaleima: 'short'}}
    </span>
    <div class="action-buttons-inline" ng-if="!editing">
      <div class="action-button" ng-if="isReconnectable()">
        <span ng-bind="'ei-yhdistetty-pohjaan' | kaanna"  class="lukio-oppiaine-disconnect-btn"></span>
        <button class="btn btn-default" kaanna="'palauta-yhteys'"
                ng-click="connectKurssi()"></button>
      </div>
      <div class="action-button" ng-if="connected()">
        <span ng-bind="'yhdistetty-pohjaan' | kaanna"  class="lukio-oppiaine-connect-btn"></span>
        <button class="btn btn-default" kaanna="'katkaise-yhteys'"
                ng-click="disconnectKurssi()"></button>
      </div>
      <div class="action-button" ng-if="!editMode && isEditAllowed()">
        <button class="btn btn-default btn-icon-only" icon-role="edit" ng-click="edit()"></button>
      </div>
      <div class="action-button" ng-if="!editMode && isEditAllowed()">
        <button class="btn btn-default btn-icon-only" icon-role="remove" ng-click="delete()"></button>
      </div>
    </div>
  </h3>

  <table>
    <tr>
      <td style="padding-right: 20px;">{{ 'kurssikoodi' | kaanna}}:</td>
      <td ng-if="!editing">{{kurssi.lokalisoituKoodi |Â kaanna}}</td>
      <!--<td ng-if="editing"><input type="text"/><button ng-click="openKoodisto()">test</button></td>-->
    </tr>
    <tr style="margin-top: 10px;">
      <td>{{ 'kurssityyppi' | kaanna}}:</td>
      <td>
        <span style="padding-right: 20px;" kaanna>{{getTyyppiSelite()}}</span>
        <span class="small-colorbox-container"><span class="colorbox kurssi-tyyppi {{kurssi.tyyppi | lowercase}}"></span></span>
      </td>
    </tr>
  </table>

  <lukio-oppiaine-osa oppiaine="oppiaine" perusteen-teksti="kurssi.perusteen.kuvaus" editable="false" editing="false"
                      oppiaineen-teksti="kurssi.kuvaus" title="'kurssi-kuvaus'"></lukio-oppiaine-osa>

  <lukio-oppiaine-osa oppiaine="oppiaine" perusteen-teksti="kurssi.perusteen.tavoitteet.teksti" editable="false" editing="false"
                      oppiaineen-teksti="kurssi.tavoitteet.teksti" title="(kurssi.tavoitteet.otsikko | kaanna) || (kurssi.perusteen.tavoitteet.otsikko | kaanna)"></lukio-oppiaine-osa>

  <lukio-oppiaine-osa oppiaine="oppiaine" perusteen-teksti="kurssi.perusteen.keskeinenSisalto.teksti" editable="false" editing="false"
                      oppiaineen-teksti="kurssi.keskeinenSisalto.teksti" title="(kurssi.keskeinenSisalto.otsikko | kaanna) || (kurssi.perusteen.keskeinenSisalto.otsikko | kaanna)"></lukio-oppiaine-osa>

  <lukio-oppiaine-osa oppiaine="oppiaine" perusteen-teksti="kurssi.perusteen.tavoitteetJaKeskeinenSisalto.teksti" editable="false" editing="false"
                      oppiaineen-teksti="kurssi.tavoitteetJaKeskeinenSisalto.teksti" title="(kurssi.tavoitteetJaKeskeinenSisalto.otsikko | kaanna) || (kurssi.perusteen.tavoitteetJaKeskeinenSisalto.otsikko | kaanna)"></lukio-oppiaine-osa>


  <!--<pre>{{ kurssi | json}}</pre>-->
  <!--<pre>{{ oppiaine.koosteinen | json}}</pre>-->
</div>
<div class="lisaa-kurssi oppiaine-form" ng-show="editMode">
  <h3 ng-bind="oppiaine.nimi | kaanna"></h3>
  <hr class="mujuviiva"/>

  <h4 kaanna="'lisaa-kurssi-title'"></h4>

  <div class="non-collapsibles">
    <form name="kurssiForm" role="form">
      <div class="action-buttons">
        <div class="floater" ng-include="'views/opetussuunnitelmat/lukio/include/kurssiOsavalitsin.html'">
        </div>
      </div>
      <div ng-include="'views/opetussuunnitelmat/lukio/include/kurssiLomakeKentat.html'"></div>
    </form>
  </div>
</div>
